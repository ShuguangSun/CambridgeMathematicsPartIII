\documentclass{tufte-book}
% Utility packages
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{geometry}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{enumerate}
\usepackage{listings}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{thmtools}
\usepackage{xparse}
\usepackage{xspace}
\usepackage{enumitem}
\usepackage{todonotes}
\hypersetup{colorlinks=true}

\declaretheorem[numberwithin=chapter,name=Theorem]{thm}
\declaretheorem[name=Lemma,sibling=thm]{lem}
\declaretheorem[name=Corollary,sibling=thm]{corollary}
\declaretheorem[name=Definition,sibling=thm,style=definition]{defn}
\declaretheorem[name=Proposition,sibling=thm]{proposition}
\declaretheorem[name=Example,sibling=thm]{exmp}
\declaretheorem[name=Exercise,sibling=thm]{exer}
\declaretheorem[name=Remark,sibling=thm]{remark}
\declaretheorem[name=Notation,numbered=no]{notation}
\declaretheorem[name=Theorem,sibling=thm,thmbox=L]{boxthm}

\let\proof\relax
\declaretheorem[style=remark,numbered=no,qed=\qedsymbol]{proof}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\aff}{aff}
\DeclareMathOperator*{\rint}{rint}
\DeclareMathOperator*{\epi}{epi}
\DeclareMathOperator*{\dom}{dom}
\DeclareMathOperator*{\con}{con}
\DeclareMathOperator*{\cl}{cl}
\setlist[enumerate]{label=(\roman*)}

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\onehalfspacing

\author{Andrew Tulloch}
\publisher{Trinity College\\The University of Cambridge}
% Shortcuts
% convergence in probability
\newcommand{\cd}{\overset{d}{\rightarrow}}    
% convergence in distribution
\newcommand{\cp}{\overset{p}{\rightarrow}}
% convergence almost surely
\newcommand{\cas}{\overset{as}{\rightarrow}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\iid}{\textsc{iid}\xspace}

% Expectation
\NewDocumentCommand{\E}{gg}{%
  \IfNoValueTF{#1}
    {%
      \mathbb{E}
    }    
    {%
      \IfNoValueTF{#2}
      {%
        \mathbb{E}\!\left(#1\right)
      }
      {%
        \mathbb{E}_{#2}\!\left(#1\right)
      }
    }%
}

% Probability
\NewDocumentCommand{\Prob}{g}{%
  \IfNoValueTF{#1}
    {%
      \mathbb{P}
    }    
    {%
      \mathbb{P}\!\left(#1\right)
    }%
}

% Probability
\NewDocumentCommand{\Q}{g}{%
  \IfNoValueTF{#1}
    {%
      \mathbb{Q}
    }    
    {%
      \mathbb{Q}\!\left(#1\right)
    }%
}


% Indicator
\NewDocumentCommand{\I}{g}{%
  \IfNoValueTF{#1}
    {%
      \mathbb{I}
    }    
    {%
      \mathbb{I}\!\left(#1\right)
    }%
}

% Expectation
\NewDocumentCommand{\Var}{g}{%
  \IfNoValueTF{#1}
    {%
      \mathbb{V}
    }    
    {%
      \mathbb{V}\!\left(#1\right)
    }%
}

% Expectation
\NewDocumentCommand{\Cov}{gg}{%
  \IfNoValueTF{#1}
    {%
      \text{Cov}
    }   
    {%
      \text{Cov}\!\left(#1, #2\right)
    }%
}